(()=>{var t,e={757:(t,e,n)=>{t.exports=n(666)},544:(t,e,n)=>{"use strict";var r=n(757),i=n.n(r);function a(t,e,n,r,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,i)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){a(s,r,i,o,c,"next",t)}function c(t){a(s,r,i,o,c,"throw",t)}o(void 0)}))}}function o(t,e,n,r,i,a,s,o){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=o?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:l}}const c=o({provide:function(){var t=this,e={};return Object.defineProperty(e,"diff_settings",{enumerable:!0,get:function(){return t.diff_settings}}),Object.defineProperty(e,"app",{enumerable:!0,get:function(){return t.app}}),Object.defineProperty(e,"addon",{enumerable:!0,get:function(){return t.addon}}),{provided:e}},data:function(){return{addon:{},app:{},view_diff:!1,diff_settings:{context:3,wrapText:!1},bare:!1,up_to_date:!0,ahead:!1,behind:!1,diverged:!1,status:"",current_branch:{name:"",tracking:""},has_uncommited_changes:!1}},computed:{canPull:function(){return this.behind||this.diverged},canPush:function(){return this.ahead&&!this.diverged}},created:function(){this.refresh()},methods:{refresh:function(){var t=this;return s(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get(cp_url("gitamic/api/status"));case 2:n=e.sent,t.bare=n.data.bare,t.up_to_date=n.data.up_to_date,t.ahead=n.data.ahead,t.behind=n.data.behind,t.diverged=n.data.diverged,t.status=n.data.status,t.current_branch=n.data.current_branch,t.addon=n.data.addon,t.app=n.data.app;case 12:case"end":return e.stop()}}),e)})))()},refreshWorkingFiles:function(){this.$refs.staged.refresh(),this.$refs.unstaged.refresh()},refreshHistory:function(){this.$refs.history.refresh()},refreshAll:function(){this.refresh(),this.refreshHistory(),this.refreshWorkingFiles()},push:function(){var t=this;return s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post(cp_url("gitamic/api/push"));case 2:t.refreshHistory();case 3:case"end":return e.stop()}}),e)})))()},pull:function(){var t=this;return s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post(cp_url("gitamic/api/pull"));case 2:t.refreshHistory();case 3:case"end":return e.stop()}}),e)})))()},initRepo:function(){var t=this;return s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post(cp_url("gitamic/api/init"));case 2:if(200!==e.sent.status){e.next=9;break}return e.next=6,t.refresh();case 6:t.$toast.success("Repo initialized. Loading..."),e.next=10;break;case 9:t.$toast.error("Failed to initialize. Check your logs. Try initializing manually");case 10:case"end":return e.stop()}}),e)})))()},openDiffViewer:function(t){this.view_diff=t},storeDiffSettings:function(t){this.diff_settings=t}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex items-center mb-3"},[n("h1",{staticClass:"flex-1"},[t._v(t._s(t.__("Gitamic")))]),t._v(" "),t.bare?t._e():n("p",{staticClass:"mx-2"},[t._v("\n            On branch "),n("code",{staticClass:"bg-white"},[t._v(t._s(t.current_branch.name))]),t._v("\n            tracking "),n("code",{staticClass:"bg-white"},[t._v(t._s(t.current_branch.tracking))])]),t._v(" "),t.bare?t._e():n("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.refreshAll.apply(null,arguments)}}},[t._v(t._s(t.__("Refresh")))]),t._v(" "),t.canPush?n("button",{staticClass:"ml-2 flex btn items-center",class:{"btn-primary":!t.canPull},on:{click:t.push}},[n("span",[t._v(t._s(t.__("Push")))])]):t._e(),t._v(" "),t.canPull?n("button",{staticClass:"ml-2 flex btn items-center btn-primary",on:{click:t.pull}},[n("span",[t._v(t._s(t.__("Pull")))])]):t._e()]),t._v(" "),t.bare?n("div",{staticClass:"card relative"},[n("p",{staticClass:"mb-2"},[t._v(t._s(t.__("Your repo hasn't been initialized. Please initialize it before using Gitamic:")))]),t._v(" "),n("div",{staticClass:"flex justify-center my-4"},[n("button",{staticClass:"btn-primary",on:{click:function(e){return e.preventDefault(),t.initRepo()}}},[t._v(t._s(t.__("Initialize repo")))])]),t._v(" "),n("p",{staticClass:"my-2"},[t._v(t._s(t.__("Alternatively, you can do so manually from your command line:")))]),t._v(" "),t._m(0)]):t._e(),t._v(" "),t.bare?t._e():n("div",[t.view_diff?n("stack",{attrs:{name:"diff-viewer"},on:{closed:function(e){t.view_diff=!1}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.close;return n("div",{staticClass:"h-full overflow-y-auto bg-white"},[n("button",{staticClass:"px-1 text-xl top-0 left-0 absolute",on:{click:r}},[t._v("×")]),t._v(" "),n("div",{staticClass:"py-2 px-4"},[n("gitamic-diff-batch",{attrs:{parameters:t.view_diff,settings:t.diff_settings},on:{fileStatusChanged:t.refreshWorkingFiles}})],1)])}}],null,!1,1566625878)}):t._e(),t._v(" "),n("div",{staticClass:"grid grid-cols-12 gap-4"},[n("div",{staticClass:"col-span-full xl:col-span-5"},[n("gitamic-history",{ref:"history",on:{"view-diff":t.openDiffViewer}})],1),t._v(" "),n("div",{staticClass:"order-first xl:order-none col-span-full xl:col-span-7 space-y-4"},[n("gitamic-staged",{ref:"staged",on:{"view-diff":t.openDiffViewer,commit:t.refreshHistory}}),t._v(" "),n("gitamic-unstaged",{ref:"unstaged",on:{"view-diff":t.openDiffViewer}})],1)])],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-grey-30 py-2 px-3"},[n("kbd",[t._v("\n                git init\n            ")])])}],!1,null,null,null).exports;function l(t,e,n,r,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){l(a,r,i,s,o,"next",t)}function o(t){l(a,r,i,s,o,"throw",t)}s(void 0)}))}}const f=o({inject:["provided"],data:function(){return{loaded:!1,count:0,rows:[],selected:[],columns:[{field:"change",label:"",width:"50"},{field:"relative_path",label:"Path"},{field:"last_modified",label:"Last modified",fieldtype:"date",width:"200"}]}},computed:{hasRows:function(){return this.count>0}},created:function(){this.refresh()},methods:{finishBulkAction:function(t,e){var n=this;return u(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("stage"!==e.action){r.next=3;break}return r.next=3,n.refreshStaged();case 3:t&&(n.clearSelections(),n.rows=e.result,n.$toast.success("Bulk action completed successfully"));case 4:case"end":return r.stop()}}),r)})))()},refresh:function(){var t=this;return u(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loaded=!1,e.next=3,t.$axios.get(cp_url("gitamic/api/unstaged"));case 3:n=e.sent,t.rows=n.data.files,t.count=n.data.count,t.loaded=!0,t.clearSelections();case 8:case"end":return e.stop()}}),e)})))()},stage:function(t){var e=this;return u(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.post(cp_url("gitamic/api/actions/unstaged"),{selections:[t.id],action:"stage"});case 2:if(200!==(r=n.sent).status){n.next=11;break}return e.clearSelections(),n.next=7,e.refreshStaged();case 7:e.rows=r.data.result,e.$toast.success(__("File staged!")),n.next=12;break;case 11:e.$toast.error(__("Failed to stage file. Check logs and try again"));case 12:case"end":return n.stop()}}),n)})))()},clearSelections:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(t=this.$refs.list)||void 0===t||t.clearSelections(),e&&this.$root.$refs.status.$refs.staged.clearSelections(!1)},refreshStaged:function(){var t=this;return u(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$root.$refs.status.$refs.staged.refresh();case 2:case"end":return e.stop()}}),e)})))()},diff:function(t){"pro"===this.provided.addon.edition&&this.$emit("view-diff",{file:t,status:"pending"})}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.hasRows?n("div",[n("h2",{staticClass:"mb-2"},[t._v(t._s(t.__("Unstaged")))]),t._v(" "),t.loaded?t._e():n("loading-graphic",{staticClass:"text-center"}),t._v(" "),n("data-list",{ref:"list",attrs:{visibleColumns:t.columns,columns:t.columns,rows:t.rows,sortColumn:"path",sortDirection:"asc"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.filteredRows;return n("div",{staticClass:"card p-0 relative"},[n("data-list-bulk-actions",{attrs:{url:t.cp_url("gitamic/api/actions/unstaged")},on:{started:t.beginBulkAction,completed:t.finishBulkAction}}),t._v(" "),n("data-list-table",{attrs:{rows:r,"allow-bulk-actions":!0},scopedSlots:t._u([{key:"cell-change",fn:function(e){var r=e.row;return[n("span",{class:"font-mono change-label change-"+r.change},[t._v(t._s(r.change))])]}},{key:"cell-relative_path",fn:function(e){var r=e.row;return[r.is_linkable&&!r.is_deleted?n("a",{attrs:{href:r.edit_url}},[t._v("\n                            "+t._s(r.relative_path)+"\n                        ")]):r.is_deleted?n("span",{staticClass:"line-through"},[t._v("\n                            "+t._s(r.relative_path)+"\n                        ")]):t._e()]}},{key:"actions",fn:function(e){var r=e.row;e.index;return[n("dropdown-list",[n("dropdown-item",{key:"git.stage",attrs:{text:t.__("Stage")},on:{click:function(e){return t.stage(r)}}}),t._v(" "),"pro"===t.provided.addon.edition?n("dropdown-item",{key:"git.diff",attrs:{text:t.__("Diff")},on:{click:function(e){return t.diff(r)}}}):t._e()],1)]}}],null,!0)})],1)}}],null,!1,4285718400)})],1):t._e()])}),[],!1,null,null,null).exports;function d(t,e,n,r,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,i)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){d(a,r,i,s,o,"next",t)}function o(t){d(a,r,i,s,o,"throw",t)}s(void 0)}))}}const h=o({inject:["provided"],data:function(){return{loaded:!1,commit_message:"",count:0,rows:[],columns:[{field:"change",label:"",width:"50"},{field:"relative_path",label:"Path"},{field:"last_modified",label:"Last modified",width:"200"}]}},created:function(){this.refresh()},computed:{hasRows:function(){return this.count>0}},methods:{finishBulkAction:function(t,e){var n=this;return p(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("unstage"!==e.action){r.next=3;break}return r.next=3,n.refreshUnstaged();case 3:t&&(n.clearSelections(),n.rows=e.result,n.$toast.success("Bulk action completed successfully"));case 4:case"end":return r.stop()}}),r)})))()},refresh:function(){var t=this;return p(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loaded=!1,e.next=3,t.$axios.get(cp_url("gitamic/api/staged"));case 3:n=e.sent,t.rows=n.data.files,t.count=n.data.count,t.loaded=!0,t.clearSelections();case 8:case"end":return e.stop()}}),e)})))()},commit:function(){var t=this;return p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.commit_message.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$axios.post(cp_url("gitamic/api/commit"),{commit_message:t.commit_message});case 4:return 200===e.sent.status?(t.$toast.success(__("Changes committed!")),t.commit_message="",t.$emit("commit")):t.$toast.error(__("Failed to commit changes. Check logs and try again")),e.next=8,t.refresh();case 8:case"end":return e.stop()}}),e)})))()},unstage:function(t){var e=this;return p(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.post(cp_url("gitamic/api/actions/staged"),{selections:[t.id],action:"unstage"});case 2:if(200!==(r=n.sent).status){n.next=11;break}return e.clearSelections(),n.next=7,e.refreshUnstaged();case 7:e.rows=r.data.result,e.$toast.success(__("File unstaged!")),n.next=12;break;case 11:e.$toast.error(__("Failed to unstage file. Check logs and try again"));case 12:case"end":return n.stop()}}),n)})))()},clearSelections:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(t=this.$refs.list)||void 0===t||t.clearSelections(),e&&this.$root.$refs.status.$refs.unstaged.clearSelections(!1)},refreshUnstaged:function(){var t=this;return p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$root.$refs.status.$refs.unstaged.refresh();case 2:case"end":return e.stop()}}),e)})))()},diff:function(t){"pro"===this.provided.addon.edition&&this.$emit("view-diff",{file:t,status:"staged"})}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.hasRows?n("div",[n("h2",{staticClass:"mb-2"},[t._v(t._s(t.__("Staged")))]),t._v(" "),t.loaded?t._e():n("loading-graphic",{staticClass:"text-center"}),t._v(" "),n("div",{staticClass:"card rounded-b-none",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.commit.apply(null,arguments):null}}},[n("div",{staticClass:"flex items-center justify-between mb-2"},[n("label",{staticClass:"flex-1",attrs:{for:"commit_message"}},[t._v(t._s(t.__("Write a commit message to describe these changes:")))]),t._v(" "),n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.__("Click to read more about commit messages"),expression:"__('Click to read more about commit messages')"}],staticClass:"bg-white border rounded-full h-4 w-4 p-1.5 shadow-sm text-sm font-bold text-grey-70 inline-flex justify-center items-center",attrs:{href:"https://chris.beams.io/posts/git-commit/",target:"_blank"}},[t._v("\n                    ?\n                ")])]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commit_message,expression:"commit_message"}],staticClass:"w-full border rounded font-mono p-2 h-32 text-sm",attrs:{id:"commit_message",name:"commit_message"},domProps:{value:t.commit_message},on:{input:function(e){e.target.composing||(t.commit_message=e.target.value)}}}),t._v(" "),n("div",{staticClass:"flex space-x-2 justify-end items-center mt-1"},[n("span",{staticClass:"text-grey text-xs"},[t._v(t._s(t.__("Hint: Use Ctrl+Enter to commit your changes!")))]),t._v(" "),n("button",{staticClass:"btn-sm btn-primary",attrs:{disabled:!t.commit_message.trim()},on:{click:t.commit}},[t._v(t._s(t.__("Commit")))])])]),t._v(" "),n("data-list",{ref:"list",attrs:{visibleColumns:t.columns,columns:t.columns,rows:t.rows,sortColumn:"path",sortDirection:"asc"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.filteredRows;return n("div",{staticClass:"card rounded-t-none p-0 relative"},[n("data-list-bulk-actions",{attrs:{url:t.cp_url("gitamic/api/actions/staged")},on:{started:t.beginBulkAction,completed:t.finishBulkAction}}),t._v(" "),n("data-list-table",{attrs:{rows:r,"allow-bulk-actions":"true"},scopedSlots:t._u([{key:"cell-change",fn:function(e){var r=e.row;return[n("span",{class:"font-mono change-label change-"+r.change},[t._v(t._s(r.change))])]}},{key:"cell-relative_path",fn:function(e){var r=e.row;return[r.is_linkable&&!r.is_deleted?n("a",{attrs:{href:r.edit_url}},[t._v("\n                            "+t._s(r.relative_path)+"\n                        ")]):r.is_deleted?n("span",{staticClass:"line-through"},[t._v("\n                            "+t._s(r.relative_path)+"\n                        ")]):t._e()]}},{key:"actions",fn:function(e){var r=e.row;e.index;return[n("dropdown-list",[n("dropdown-item",{key:"git.unstage",attrs:{text:t.__("Unstage")},on:{click:function(e){return t.unstage(r)}}}),t._v(" "),"pro"===t.provided.addon.edition?n("dropdown-item",{key:"git.diff",attrs:{disabled:!1,text:t.__("Diff")},on:{click:function(e){return t.diff(r)}}}):t._e()],1)]}}],null,!0)})],1)}}],null,!1,1641321868)})],1):t._e()])}),[],!1,null,null,null).exports;function v(t,e,n,r,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,i)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){v(a,r,i,s,o,"next",t)}function o(t){v(a,r,i,s,o,"throw",t)}s(void 0)}))}}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const b=o({inject:["batch"],props:["file","status","collapsible"],watch:{"$props.file":{handler:function(t){this.diff=g(g({},this.diff),t)},deep:!0,immediate:!0}},data:function(){return{loaded:!1,changing_status:!1,open:!1,all_chunks_open:!0,diff:g({changes:[],change_count:0},this.file)}},created:function(){var t=this;return m(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.file.changes){e.next=3;break}return e.next=3,t.refresh();case 3:t.loaded=!0,t.open=!t.collapsible,t.all_chunks_open=!t.hasManyChunks();case 6:case"end":return e.stop()}}),e)})))()},methods:{refresh:function(){var t=this;return m(i().mark((function e(){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loaded=!1,n=t.diff.relative_path,t.diff.changes.length>0&&(n=n.new_name),r={params:{file:n,status:t.status,context:t.batch.preferences.context}},e.next=6,t.$axios.get(cp_url("gitamic/api/diff-file"),r);case 6:a=e.sent,t.diff=a.data.file,t.loaded=!0;case 9:case"end":return e.stop()}}),e)})))()},hasManyChunks:function(){return this.diff.change_count>20},changeStatus:function(){var t=this;this.changing_status=!0;var e="pending"===this.diff.status?"stage":"unstage",n="pending"===this.diff.status?"staged":"pending";this.$axios.post(cp_url("gitamic/api/"+e),{file:this.diff.new_name}).then((function(e){Vue.set(t.diff,"status",n),t.changing_status=!1,t.$emit("fileStatusChanged",t.diff)}))},fileName:function(t){return t.old_name?t.old_name===t.new_name?t.old_name:t.old_name+(t.new_name?" &rarr; "+t.new_name:""):t.new_name},toggleAllChunks:function(){var t=this;this.all_chunks_open=!this.all_chunks_open,this.$children.forEach((function(e){e.$data.open=t.all_chunks_open}))}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card",class:{"mb-2":t.collapsible}},[n("div",{staticClass:"md:flex space-x-2 items-stretch",class:{"mb-3":t.open}},[n("div",{staticClass:"flex space-x-2 items-center flex-1"},[t.collapsible?n("button",{staticClass:"p-1",on:{click:function(e){t.open=!t.open}}},[n("span",{staticClass:"block",class:{"rotate-90":t.open}},[t._v("ᐅ")])]):t._e(),t._v(" "),n("span",{class:"mx-1 font-mono change-label change-"+t.diff.type},[t._v(t._s(t.diff.type))]),t._v(" "),n("h2",{staticClass:"flex-1",domProps:{innerHTML:t._s(t.fileName(t.diff))}})]),t._v(" "),n("div",{staticClass:"flex space-x-2 items-center justify-end md:justify-self-auto"},[n("span",{staticClass:"text-sm"},[t._v("\n                    "+t._s(t.diff.change_count)+" "+t._s(1===t.diff.change_count?t.__("chunk"):t.__("chunks"))+"\n                ")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"btn btn-sm",on:{click:t.toggleAllChunks}},[t._v("\n                    "+t._s(t.all_chunks_open?t.__("Collapse all"):t.__("Expand all"))+"\n                ")]),t._v(" "),t.diff.status?n("button",{staticClass:"ml-2 flex btn-sm items-center btn-primary",attrs:{disabled:t.changing_status},on:{click:function(e){return t.changeStatus(t.diff)}}},[n("span",[t._v(t._s("pending"===t.diff.status?t.__("Stage"):t.__("Unstage")))])]):t._e()])]),t._v(" "),n("div",[t.loaded?t._e():n("loading-graphic",{staticClass:"text-center"}),t._v(" "),t._l(t.diff.changes,(function(e,r){return t.open?n("gitamic-diff-chunk",{key:r,attrs:{change:e,start_closed:!t.all_chunks_open}}):t._e()}))],2)])])}),[],!1,null,null,null).exports;function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t,e,n,r,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,i)}function $(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){C(a,r,i,s,o,"next",t)}function o(t){C(a,r,i,s,o,"throw",t)}s(void 0)}))}}const O=o({provide:function(){var t=this,e={};return Object.defineProperty(e,"preferences",{enumerable:!0,get:function(){return t.preferences}}),{batch:e}},props:["parameters","settings"],data:function(){return{files:[],preferences:{}}},watch:{preferences:function(t){this.$root.$refs.status.storeDiffSettings(t)}},created:function(){var t=this;return $(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preferences=t.settings,e.next=3,t.refresh();case 3:t.files.length<1&&t.$toast.error(__("Something went wrong. Please try again"));case 4:case"end":return e.stop()}}),e)})))()},methods:{refresh:function(){var t=this;return $(i().mark((function e(){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.files.length||!t.parameters.file){e.next=3;break}return t.files.push(t.parameters.file),e.abrupt("return");case 3:return n=t.parameters,r=x({context:t.preferences.context},n),e.next=7,t.$axios.get(cp_url("gitamic/api/diff-batch"),{params:r});case 7:a=e.sent,t.files=a.data.files;case 9:case"end":return e.stop()}}),e)})))()},fileStatusChanged:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["fileStatusChanged"].concat(e))}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex justify-between items-center sticky"},[n("h1",[t._v(t._s(t.files.length)+" "+t._s(1!==t.files.length?"files":"file")+" with changes")]),t._v(" "),n("div",{staticClass:"flex space-x-2 items-center justify-end"},[n("label",[t._v("Wrap text: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.preferences.wrapText,expression:"preferences.wrapText"}],staticClass:"ml-2",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.preferences.wrapText)?t._i(t.preferences.wrapText,null)>-1:t.preferences.wrapText},on:{change:function(e){var n=t.preferences.wrapText,r=e.target,i=!!r.checked;if(Array.isArray(n)){var a=t._i(n,null);r.checked?a<0&&t.$set(t.preferences,"wrapText",n.concat([null])):a>-1&&t.$set(t.preferences,"wrapText",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.preferences,"wrapText",i)}}})]),t._v(" "),n("label",[t._v("Context: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.preferences.context,expression:"preferences.context"}],staticClass:"ml-2 border rounded",attrs:{type:"number",min:"0",max:"50"},domProps:{value:t.preferences.context},on:{input:function(e){e.target.composing||t.$set(t.preferences,"context",e.target.value)}}})]),t._v(" "),n("button",{staticClass:"btn btn-sm",on:{click:t.refresh}},[t._v("Refresh")])])]),t._v(" "),t._l(t.files,(function(e,r){return n("gitamic-diff-file",{key:r,ref:"diff",refInFor:!0,attrs:{collapsible:t.files.length>1,file:e,status:t.parameters.status},on:{fileStatusChanged:t.fileStatusChanged}})}))],2)}),[],!1,null,null,null).exports;const j=o({inject:["batch"],props:["change","start_closed"],data:function(){return{open:!this.start_closed}},updated:function(){var t=this;this.$nextTick((function(){var e,n=0;t.$refs.lines.forEach((function(t){t.clientWidth>n&&(n=t.clientWidth)})),t.batch.preferences.wrapText||(e="min-width: "+n+"px"),t.$refs.lines.forEach((function(t){t.style=e}))}))}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"flex items-center justify-between bg-grey-30 hover:bg-grey-40 w-full",on:{click:function(e){t.open=!t.open}}},[n("h3",{staticClass:"p-1"},[t._v("Lines: "+t._s(t.change.lines[0].old_number)+" - "+t._s(t.change.lines[t.change.lines.length-1].new_number))]),t._v(" "),n("span",{staticClass:"block p-1",class:{"rotate-180":t.open}},[t._v("ᐁ")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"diff-chunk"},t._l(t.change.lines,(function(e){var r;return n("div",{class:(r={"diff-chunk-line":t.batch.preferences.wrapText,"diff-chunk-line-nowrap":!t.batch.preferences.wrapText},r["diff-"+e.type]=!0,r)},[n("div",{staticClass:"diff-chunk-line-meta"},[n("div",["new"!==e.type?n("pre",[t._v(t._s(e.old_number))]):t._e()]),t._v(" "),n("div",["old"!==e.type?n("pre",[t._v(t._s(e.new_number))]):t._e()]),t._v(" "),n("div",["old"===e.type?n("pre",[t._v("-")]):t._e(),t._v(" "),"new"===e.type?n("pre",[t._v("+")]):t._e()])]),t._v(" "),n("div",{ref:"lines",refInFor:!0,staticClass:"diff-chunk-line-data"},[n("pre",[t._v(t._s(e.content||" "))])])])})),0)])}),[],!1,null,null,null).exports;function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,a=[],s=!0,o=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){o=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(o)throw i}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e,n,r,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,i)}const L=o({inject:["provided"],data:function(){return{loaded:!1,commits:[]}},created:function(){this.refresh()},methods:{refresh:function(){var t,e=this;return(t=i().mark((function t(){var n,r,a,s,o,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loaded=!1,t.next=3,e.$axios.get(cp_url("gitamic/api/history"));case 3:for(n=t.sent,r=0,a=Object.entries(n.data);r<a.length;r++)s=S(a[r],2),o=s[0],c=s[1],e[o]=c;e.loaded=!0;case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){E(a,r,i,s,o,"next",t)}function o(t){E(a,r,i,s,o,"throw",t)}s(void 0)}))})()},diff:function(t){this.$emit("view-diff",{left:t.parents[0],right:t.revision})}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("h2",{staticClass:"mb-2"},[t._v(t._s(t.__("History")))]),t._v(" "),n("div",{staticClass:"card py-1"},[t.loaded?t._e():n("loading-graphic",{staticClass:"text-center"}),t._v(" "),n("ul",{staticClass:"divide-y divide-gray-200",attrs:{role:"list"}},t._l(t.commits,(function(e){return n("li",[n("div",{staticClass:"grid grid-cols-12 gap-4 my-2"},[n("div",{staticClass:"col-span-9 space-y-1"},[n("h3",{staticClass:"font-medium"},[t._v(t._s(e.message.subject))]),t._v(" "),e.message.body?n("p",{staticClass:"text-sm"},[t._v(t._s(e.message.body))]):t._e(),t._v(" "),n("p",{staticClass:"text-sm text-grey"},[t._v(t._s(e.committer.name)+" ("+t._s(e.committer.email)+")")])]),t._v(" "),n("div",{staticClass:"col-span-2 space-y-1 text-right"},[n("p",{staticClass:"text-sm font-mono"},[n("a",{on:{click:function(n){return t.diff(e)}}},[t._v(t._s(e.shorthash))])]),t._v(" "),n("p",{staticClass:"text-sm text-grey"},[t._v(t._s(e.committer.date))])]),t._v(" "),n("div",{staticClass:"col-span-1 space-y-1 flex items-center"},[e.sync_action&&t.provided.app.url?n("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.__(e.sync_action+" to sync these changes with your "+("push"===e.sync_action?"remote":"local")+" branch"),expression:"__(commit.sync_action + ' to sync these changes with your ' + (commit.sync_action === 'push' ? 'remote' : 'local') + ' branch')"}],staticClass:"icon w-4 h-4 ",attrs:{src:t.provided.app.url+"/vendor/gitamic/images/"+e.sync_action+".svg"}}):t._e()])])])})),0)],1)])])}),[],!1,null,null,null).exports;Statamic.booting((function(){Statamic.$components.register("gitamic-status",c),Statamic.$components.register("gitamic-unstaged",f),Statamic.$components.register("gitamic-staged",h),Statamic.$components.register("gitamic-diff-file",b),Statamic.$components.register("gitamic-diff-batch",O),Statamic.$components.register("gitamic-diff-chunk",j),Statamic.$components.register("gitamic-history",L)}))},588:()=>{},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new S(r||[]);return a._invoke=function(t,e,n){var r=f;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var o=$(s,n);if(o){if(o===v)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?h:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(t,n,s),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",v={};function m(){}function _(){}function g(){}var y={};c(y,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(P([])));w&&w!==n&&r.call(w,a)&&(y=w);var x=g.prototype=m.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(i,a,s,o){var c=u(t[i],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,o)}),(function(t){n("throw",t,s,o)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,o)}))}o(c.arg)}var i;this._invoke=function(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}}function $(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,$(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=u(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:E}}function E(){return{value:e,done:!0}}return _.prototype=g,c(x,"constructor",g),c(g,"constructor",_),_.displayName=c(g,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,o,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},k(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var s=new C(l(e,n,r,i),a);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(x),c(x,o,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,r),a.exports}r.m=e,t=[],r.O=(e,n,i,a)=>{if(!n){var s=1/0;for(u=0;u<t.length;u++){for(var[n,i,a]=t[u],o=!0,c=0;c<n.length;c++)(!1&a||s>=a)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(o=!1,a<s&&(s=a));if(o){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[n,i,a]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={454:0,761:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var i,a,[s,o,c]=n,l=0;if(s.some((e=>0!==t[e]))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(c)var u=c(r)}for(e&&e(n);l<s.length;l++)a=s[l],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),r.O(void 0,[761],(()=>r(544)));var i=r.O(void 0,[761],(()=>r(588)));i=r.O(i)})();